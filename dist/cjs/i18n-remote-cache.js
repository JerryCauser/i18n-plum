"use strict";var f=Object.defineProperty;var R=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var M=Object.prototype.hasOwnProperty;var v=(i,e)=>{for(var t in e)f(i,t,{get:e[t],enumerable:!0})},T=(i,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of y(e))!M.call(i,n)&&n!==t&&f(i,n,{get:()=>e[n],enumerable:!(r=R(e,n))||r.enumerable});return i};var b=i=>T(f({},"__esModule",{value:!0}),i);var D={};v(D,{I18nRemoteCache:()=>o,default:()=>C});module.exports=b(D);function I(i,e,t="."){if(i==null)return Array.isArray(e)?e.join(t):e;if(typeof e=="string"&&(e=e.split(t)),!Array.isArray(e)||e.length===0)return;if(e.length===1)return i.get(e[0]);let r=i.get(e[0]);for(let n=1;Boolean(r)&&n<e.length;++n)r=r.get(e[n]);return r}var g=I;function O(i,e){let t=/{{(.*?)}}/g;return i.replace(t,(r,n)=>{let s=n.trim().split(".");if(s.length===0)return"";let a=e[s[0]];if(s.length>1)for(let l=1;Boolean(a)&&l<s.length;++l)a=a[s[l]];return typeof a=="string"?a:""})}var p=O;function d(i){var t;let e=new Map;for(let r in i)if(Object.hasOwn(i,r)){let n=i[r];n!==null&&typeof n=="object"&&((t=n.constructor)==null?void 0:t.name)==="Object"?e.set(r,d(n)):e.set(r,n)}return e}var c=d;var h=class{#e;#t=new Map;#n;#r=new Map;constructor(e){this.#t=c((e==null?void 0:e.tables)??{}),this.#e=(e==null?void 0:e.locale)??"",this.#n=(e==null?void 0:e.separator)??"."}get locale(){return this.#e}has(e){return this.#t.has(e)}set(e,t){t instanceof Map?this.#t.set(e,t):this.#t.set(e,c(t))}extend(e,t){let r=this.#t.get(e);if(r==null)return this.set(e,t);t instanceof Map||(t=c(t));for(let n of t)r.set(n[0],n[1])}delete(e){return this.#t.delete(e)}setLocale(e){this.#e!==e&&(this.#e=e,this.emit("change",e))}get(e){return this.#t.get(e)}t(e,t,r){let n=this.get(r??this.#e),s=g(n,e,this.#n)??e.toString();return typeof s=="function"?s(t):p(s,t)}emit(e,t){let r=!1;for(let[n,s]of this.#r)e===s.eventName&&(setTimeout(()=>n(t),0),s.once&&this.#r.delete(n),r=!0);return r}on(e,t){return this.#r.set(t,{eventName:e,once:!1}),this}once(e,t){return this.#r.set(t,{eventName:e,once:!0}),this}off(e){return this.#r.delete(e),this}},m=h;var u=class extends m{#e;#t;#n;#r;constructor(e){super(e),this.#e=(e==null?void 0:e.fetcher)??fetch,this.#n=(e==null?void 0:e.languageToken)??"{{lang}}",this.#t=(e==null?void 0:e.path)??`/i18n/${this.#n}.json`,this.#r=(e==null?void 0:e.pathCompiler)??function(t,r,n){return t.replace(r,n)}}async loadLocale(e){if(!this.has(e)){let t=this.#r(this.#t,this.#n,e),r=await this.#e(t);r instanceof Response?r=await r.json():typeof r=="string"&&(r=JSON.parse(r)),this.extend(e,r)}super.setLocale(e)}setLocale(e){this.loadLocale(e).catch(console.error)}},x=u;var o=class extends x{#e;constructor(e){super(e),this.#e=(e==null?void 0:e.storage)??new Map}async loadLocale(e){if(!this.has(e)){let t=this.#e.get(e);typeof t=="string"&&(t=JSON.parse(t)),t!==null&&this.extend(e,t)}return await super.loadLocale(e)}},C=o;
//# sourceMappingURL=i18n-remote-cache.js.map
