"use strict";var h=Object.defineProperty;var w=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var F=Object.prototype.hasOwnProperty;var E=(i,e)=>{for(var t in e)h(i,t,{get:e[t],enumerable:!0})},P=(i,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of S(e))!F.call(i,n)&&n!==t&&h(i,n,{get:()=>e[n],enumerable:!(r=w(e,n))||r.enumerable});return i};var W=i=>P(h({},"__esModule",{value:!0}),i);var V={};E(V,{initI18n:()=>J});module.exports=W(V);var c=require("react");function A(i,e,t="."){if(i==null)return Array.isArray(e)?e.join(t):e;if(typeof e=="string"&&(e=e.split(t)),!Array.isArray(e)||e.length===0)return;if(e.length===1)return i.get(e[0]);let r=i.get(e[0]);for(let n=1;Boolean(r)&&n<e.length;++n)r=r.get(e[n]);return r}var C=A;function B(i,e){let t=/{{(.*?)}}/g;return i.replace(t,(r,n)=>{let a=n.trim().split(".");if(a.length===0)return"";let o=e[a[0]];if(a.length>1)for(let s=1;Boolean(o)&&s<a.length;++s)o=o[a[s]];return typeof o=="string"?o:""})}var O=B;function v(i){var t;let e=new Map;for(let r in i)if(Object.hasOwn(i,r)){let n=i[r];n!==null&&typeof n=="object"&&((t=n.constructor)==null?void 0:t.name)==="Object"?e.set(r,v(n)):e.set(r,n)}return e}var l=v;var g=class{#e;#t=new Map;#n;#r=new Map;constructor(e){this.#t=l((e==null?void 0:e.tables)??{}),this.#e=(e==null?void 0:e.locale)??"",this.#n=(e==null?void 0:e.separator)??"."}get locale(){return this.#e}has(e){return this.#t.has(e)}set(e,t){t instanceof Map?this.#t.set(e,t):this.#t.set(e,l(t))}extend(e,t){let r=this.#t.get(e);if(r==null)return this.set(e,t);t instanceof Map||(t=l(t));for(let n of t)r.set(n[0],n[1])}delete(e){return this.#t.delete(e)}setLocale(e){this.#e!==e&&(this.#e=e,this.emit("change",e))}get(e){return this.#t.get(e)}t(e,t,r){let n=this.get(r??this.#e),a=C(n,e,this.#n)??e.toString();return typeof a=="function"?a(t):O(a,t)}emit(e,t){let r=!1;for(let[n,a]of this.#r)e===a.eventName&&(setTimeout(()=>n(t),0),a.once&&this.#r.delete(n),r=!0);return r}on(e,t){return this.#r.set(t,{eventName:e,once:!1}),this}once(e,t){return this.#r.set(t,{eventName:e,once:!0}),this}off(e){return this.#r.delete(e),this}},T=g;var d=class extends T{#e;#t;#n;#r;constructor(e){super(e),this.#e=(e==null?void 0:e.fetcher)??fetch,this.#n=(e==null?void 0:e.languageToken)??"{{lang}}",this.#t=(e==null?void 0:e.path)??`/i18n/${this.#n}.json`,this.#r=(e==null?void 0:e.pathCompiler)??function(t,r,n){return t.replace(r,n)}}async loadLocale(e){if(!this.has(e)){let t=this.#r(this.#t,this.#n,e),r=await this.#e(t);r instanceof Response?r=await r.json():typeof r=="string"&&(r=JSON.parse(r)),this.extend(e,r)}super.setLocale(e)}setLocale(e){this.loadLocale(e).catch(console.error)}},M=d;var u=class extends M{#e;constructor(e){super(e),this.#e=(e==null?void 0:e.storage)??new Map}async loadLocale(e){if(!this.has(e)){let t=this.#e.get(e);typeof t=="string"&&(t=JSON.parse(t)),t!==null&&this.extend(e,t)}return await super.loadLocale(e)}};var m=class extends u{};function J(i){i??={};let{defaultLocale:e="en",path:t,storage:r,fetcher:n,pathCompiler:a,languageToken:o}=i,s=new m({path:t,storage:r,fetcher:n,pathCompiler:a,languageToken:o});s.setLocale(e);let f=(0,c.createContext)(s);function b(R){let{children:L,locale:p=null,lngDict:x=null}=R,[,N]=(0,c.useState)(0),I=()=>N(j=>j+1),y=(0,c.useRef)(!0);return(0,c.useEffect)(()=>(s.on("change",I),()=>{s.off(I)})),y.current&&x!==null&&p!==null&&(y.current=!1,s.set(p,x),s.setLocale(p)),<f.Provider value={s}>{L}</f.Provider>}function D(){return(0,c.useContext)(f)}return{I18nContext:f,I18nWrapper:b,useI18n:D}}
//# sourceMappingURL=i18n-react-remote-cache.js.map
