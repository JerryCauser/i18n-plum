function d(i,t,e="."){if(i==null)return Array.isArray(t)?t.join(e):t;if(typeof t=="string"&&(t=t.split(e)),!Array.isArray(t)||t.length===0)return;if(t.length===1)return i.get(t[0]);let r=i.get(t[0]);for(let n=1;Boolean(r)&&n<t.length;++n)r=r.get(t[n]);return r}var f=d;function m(i,t){let e=/{{(.*?)}}/g;return i.replace(e,(r,n)=>{let s=n.trim().split(".");if(s.length===0)return"";let a=t[s[0]];if(s.length>1)for(let l=1;Boolean(a)&&l<s.length;++l)a=a[s[l]];return typeof a=="string"?a:""})}var h=m;function g(i){var e;let t=new Map;for(let r in i)if(Object.hasOwn(i,r)){let n=i[r];n!==null&&typeof n=="object"&&((e=n.constructor)==null?void 0:e.name)==="Object"?t.set(r,g(n)):t.set(r,n)}return t}var c=g;var o=class{#e;#t=new Map;#n;#r=new Map;constructor(t){this.#t=c((t==null?void 0:t.tables)??{}),this.#e=(t==null?void 0:t.locale)??"",this.#n=(t==null?void 0:t.separator)??"."}get locale(){return this.#e}has(t){return this.#t.has(t)}set(t,e){e instanceof Map?this.#t.set(t,e):this.#t.set(t,c(e))}extend(t,e){let r=this.#t.get(t);if(r==null)return this.set(t,e);e instanceof Map||(e=c(e));for(let n of e)r.set(n[0],n[1])}delete(t){return this.#t.delete(t)}setLocale(t){this.#e!==t&&(this.#e=t,this.emit("change",t))}get(t){return this.#t.get(t)}t(t,e,r){let n=this.get(r??this.#e),s=f(n,t,this.#n)??t.toString();return typeof s=="function"?s(e):h(s,e)}emit(t,e){let r=!1;for(let[n,s]of this.#r)t===s.eventName&&(setTimeout(()=>n(e),0),s.once&&this.#r.delete(n),r=!0);return r}on(t,e){return this.#r.set(e,{eventName:t,once:!1}),this}once(t,e){return this.#r.set(e,{eventName:t,once:!0}),this}off(t){return this.#r.delete(t),this}},p=o;var u=class extends p{#e;#t;#n;#r;constructor(t){super(t),this.#e=(t==null?void 0:t.fetcher)??fetch,this.#n=(t==null?void 0:t.languageToken)??"{{lang}}",this.#t=(t==null?void 0:t.path)??`/i18n/${this.#n}.json`,this.#r=(t==null?void 0:t.pathCompiler)??function(e,r,n){return e.replace(r,n)}}async loadLocale(t){if(!this.has(t)){let e=this.#r(this.#t,this.#n,t),r=await this.#e(e);r instanceof Response?r=await r.json():typeof r=="string"&&(r=JSON.parse(r)),this.extend(t,r)}super.setLocale(t)}setLocale(t){this.loadLocale(t).catch(console.error)}},D=u;export{u as I18nRemote,D as default};
//# sourceMappingURL=i18n-remote.js.map
